<!DOCTYPE html>
<html lang="en">
   <head>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>phts.hrkltz.io</title>
      <base href="/">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="description" content="Welcome to phts.hrkltz.io!">
      <link rel="preconnect" href="https://fonts.gstatic.com" />
      <style>
          @font-face {
              font-family: 'Outfit';
              font-style: normal;
              font-weight: 500;
              src: url(https://fonts.gstatic.com/s/outfit/v6/QGYvz_MVcBeNP4NJtEtqUYLknw.woff2) format('woff2');
              unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
          }
          @font-face {
              font-family: 'Outfit';
              font-style: normal;
              font-weight: 600;
              src: url(https://fonts.gstatic.com/s/outfit/v6/QGYvz_MVcBeNP4NJtEtqUYLknw.woff2) format('woff2');
              unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
          }
      </style>
      <style>
         html, body {
            margin: unset;
         }

         body {
            background-color: #f2f2f7;
            font-family: 'Outfit';
         }

         div#gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 0px;
         }

         div#gallery > img {
            width: 100%;
            aspect-ratio: 1 / 1;
            object-fit: cover;
            background-color: #f0f0f0; /* Placeholder color before image loads */
         }

         img#picture {
            bottom: 0;
            left: 0;
            margin: auto;
            max-height: 100%;
            max-width: 100%;
            object-fit: contain;
            overflow: auto;
            position: fixed;
            right: 0;
            top: 0;
         }
         
         img {
            max-width: 100vw;
            max-height: 100dvh;
         }

         div#countryList {
            background-color: #ffffff;
            border-radius: 10px;
            margin: 20px;
         }

         div#countryList > div {
            padding: 10px 20px;
            display: flex;
            flex-direction: row;
            justify-content: space-between;
         }

         div#countryList > div:not(:last-child) {
            border-bottom: #f2f2f7 solid 1px;
         }
         
         div#countryList > div > svg {
            width: 24px;
         }
      </style>
   </head>
   <body>
   </body>
   <script>
      const galleryDiv = document.getElementById('gallery');
      /// IMAGE_OBJECT...
      const imageObject = {"AT": ["202300.webp"],"CH": ["202200.webp","202201.webp","202202.webp","202203.webp","202204.webp","202400.webp"],"DE": ["202200.webp","202201.webp","202202.webp"],"ES": ["202300.webp","202301.webp","202302.webp","202303.webp","202304.webp"],"FI": ["202200.webp","202201.webp","202202.webp","202203.webp","202204.webp","202205.webp","202206.webp","202207.webp","202208.webp"],"SE": ["202200.webp"],"US": ["202300.webp"]};
      /// ...IMAGE_OBJECT

      // Event listener for back/forward button navigation
      window.onpopstate = function(event) {
         if (event.state) {
            switch (event.state.page) {
               case 1:
                  buildPage1(event.state.countryCode);
                  break;
               case 2:
                  buildPage2(event.state.countryCode, event.state.fileName);
                  break;
            };
         } else {
            buildPage0();
         };
      };

      buildPage0();

      function buildPage0() {
         const bodyElement = document.body;
         bodyElement.innerHTML = '';
         const countryListElement = document.createElement('div');
         countryListElement.id = 'countryList';
         bodyElement.appendChild(countryListElement);
         Object.keys(imageObject).forEach((countryCode) => {
            const div = document.createElement('div');
            div.innerHTML = `<div>${countryCode}</div><svg fill="#828287" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.343 18.657a1 1 0 0 1-.707-1.707l4.95-4.95-4.95-4.95a1 1 0 0 1 1.414-1.414l5.657 5.657a1 1 0 0 1 0 1.414l-5.657 5.657a1 1 0 0 1-.707.293z"></path></svg>`;
            div.onclick = function() {
               history.pushState({ page: 1, countryCode: countryCode }, null);
               buildPage1(countryCode);
            }
            countryListElement.appendChild(div);
         });
      }


      function buildPage1(countryCode, rebuild = true) {
         const body = document.body;
         body.innerHTML = '';
         const div = document.createElement('div');
         div.id = 'gallery';
         body.appendChild(div);

         imageObject[countryCode].forEach((fileName) => {
            const imgElement = document.createElement("img");
            imgElement.alt = `${countryCode}/${fileName}`;
            imgElement.loading = 'lazy';
            imgElement.src = `https://media.githubusercontent.com/media/oliver-hrkltz/phts.hrkltz.io/refs/heads/main/data/${countryCode}/${fileName}`;
            imgElement.onclick = function() {
               history.pushState({ page: 1, countryCode: countryCode }, null);
               buildPage2(countryCode, fileName);
            }
            div.appendChild(imgElement);
         });
      }


      function buildPage2(countryCode, fileName) {
         const body = document.body;
         body.innerHTML = '';
         const imgElement = document.createElement("img");
         imgElement.id = 'picture';
         imgElement.alt = `${countryCode}/${fileName}`;
         imgElement.loading = 'lazy';
         imgElement.src = `https://media.githubusercontent.com/media/oliver-hrkltz/phts.hrkltz.io/refs/heads/main/data/${countryCode}/${fileName}`;
         body.appendChild(imgElement);
      }
   </script>
</html>